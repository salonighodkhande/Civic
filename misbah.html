<!DOCTYPE html>
<html lang="en">
<head>
<script src="script.js" defer></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Complaint Registration Portal</title>
  <style>*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",Arial,sans-serif;scroll-behavior:smooth}
    body{
      background:linear-gradient(135deg,#e6f0ff,#f4f6f9);
      color:#333;line-height:1.6;
    }

    /* Header */
    header{
      background:linear-gradient(90deg,#0056b3,#1976d2);
      color:#fff;
      padding:12px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      box-shadow:0 2px 10px rgba(0,0,0,0.2);
    }
    
    header img{height:55px;margin-right:10px}
    .header-info{display:flex;align-items:center;gap:20px;flex-wrap:wrap}
    .header-info div{font-size:.9rem}

    nav{
      background:linear-gradient(90deg,#ffffff,#ffffff);
      padding:14px;
      text-align:center;
      position:sticky;top:0;z-index:1000;
      box-shadow:0 2px 8px rgba(0,0,0,0.15);
    }
    nav a{
      color:#03045e;
      margin:0 15px;
      font-weight:600;
      letter-spacing:0.5px;
      transition:all .3s;
      text-decoration:none;
    }
    nav a:hover{color:#fff;text-shadow:0 0 8px #03045e}

    /* Hero */
    .hero{
      background:url("/final-web/istockphoto-1146418702-1024x1024.jpg") center/cover no-repeat;
      color:#fff;
      padding:120px 20px;
      text-align:center;
      animation:fadeIn 2s ease;
      position:relative;
    }
    .hero::after{
      content:"";
      position:absolute;top:0;left:0;width:100%;height:100%;
      background:rgba(0,86,179,0.6);
    }
    .hero h1{font-size:3rem;margin-bottom:10px;text-shadow:0 3px 7px #000;position:relative;z-index:1;color:#ffeb3b}
    .hero p{font-size:1.3rem;text-shadow:0 2px 6px #000;position:relative;z-index:1;color:#fff}

    /* Sections */
    .section{
      max-width:1100px;
      margin:60px auto;
      padding:30px;
      background:rgba(255,255,255,0.95);
      border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.15);
      backdrop-filter:blur(10px);
      opacity:0;
      transform:translateY(40px);
      transition:all .8s ease;
    }
    .section.visible{opacity:1;transform:translateY(0)}
    .section h2{
      color:#0056b3;
      margin-bottom:18px;
      border-bottom:2px solid #ffeb3b;
      padding-bottom:6px;
    }

    /* Forms */
    form{display:grid;gap:15px}
    label{font-weight:600;display:block;margin-bottom:4px}
    input,select,textarea{
      width:100%;
      padding:12px;
      border:1px solid #ccc;
      border-radius:6px;
      font-size:.95rem;
      transition:all .3s;
      background:#fdfdfd;
    }
    input:focus,select:focus,textarea:focus{
      border-color:#1976d2;
      box-shadow:0 0 8px rgba(33,150,243,0.5);
      outline:none;
      background:#fff;
    }
    textarea{resize:vertical;min-height:90px}

    button{
      background:linear-gradient(90deg,#1976d2,#2196f3);
      color:#fff;
      padding:13px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
      letter-spacing:0.5px;
      transition:transform .2s,box-shadow .3s,background .3s;
    }
    button:hover{
      transform:translateY(-2px);
      box-shadow:0 6px 14px rgba(0,0,0,0.25);
      background:linear-gradient(90deg,#ffeb3b,#ffd600);
      color:#0056b3;
    }

    iframe{
      width:100%;
      height:420px;
      border:0;
      border-radius:10px;
      filter:grayscale(20%) contrast(1.1);
      transition:filter .3s;
    }
    iframe:hover{filter:grayscale(0) contrast(1.2)}

    footer{
      background:linear-gradient(90deg,#0056b3,#1976d2);
      color:#fff;
      padding:25px;
      margin-top:60px;
      text-align:center;
      box-shadow:0 -3px 10px rgba(0,0,0,0.2);
    }
    footer p{margin:6px 0}

    /* Database Controls */
    .db-controls{
      margin:20px 0;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .db-controls button{
      padding:10px 15px;
      font-size:0.9rem;
    }

    /* Complaint List */
    .complaint-item{
      border:1px solid #ddd;
      border-radius:8px;
      padding:15px;
      margin:10px 0;
      background:#f9f9f9;
    }
    .complaint-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .complaint-id{
      font-weight:bold;
      color:#0056b3;
    }
    .status{
      padding:5px 10px;
      border-radius:4px;
      font-size:0.8rem;
      font-weight:bold;
    }
    .status.registered{background:#e3f2fd;color:#1976d2}
    .status.progress{background:#fff3e0;color:#f57c00}
    .status.resolved{background:#e8f5e8;color:#388e3c}

    /* Search and Filter */
    .search-section{
      background:#f5f5f5;
      padding:20px;
      border-radius:8px;
      margin:20px 0;
    }
    .search-controls{
      display:grid;
      grid-template-columns:1fr 1fr 1fr auto;
      gap:10px;
      align-items:end;
    }

    /* Animations */
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(-40px)}
      to{opacity:1;transform:translateY(0)}
    }

    /* Background Overlay */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(to bottom right, rgba(33,150,243,0.4), rgba(255,235,59,0.3));
      z-index: -1;
    }

    @media (max-width: 768px) {
      .search-controls {
        grid-template-columns: 1fr;
      }
    }

</style>
</head>

<body>

  <!-- Header -->
  <header>
      <h2 data-en="Digital Buldhana" data-hi="‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§¨‡•Å‡§≤‡§¢‡§æ‡§£‡§æ">Digital Buldhana</h2>
    </div>
    <div class="header-info">
     <div data-en="üìç Buldhana, India" data-hi="üìç‡§¨‡•Å‡§≤‡§¢‡§æ‡§£‡§æ, ‡§≠‡§æ‡§∞‡§§">üìçBuldhana, India</div>
      <div data-en="üìû +91-9876543210" data-hi="üìû +91-9876543210">üìû +91-9876543210</div>
      <div data-en="‚úâ info@complaintportal.gov" data-hi="‚úâ info@complaintportal.gov">‚úâ info@complaintportal.gov</div>
    </div>
    <div class="lang-switch">
      <select id="languageSwitcher">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      </select>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
   <a href="/final-web/index.html" data-en="Home" data-hi="‡§π‡•ã‡§Æ">Home</a>
    <a href="#register" data-en="Register Complaint" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">Register Complaint</a>
    <a href="#track" data-en="Track Complaints" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç">Track Complaints</a>
    <a href="#database" data-en="Database Manager" data-hi="‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï">Database Manager</a>
    <a href="#upload" data-en="Upload Document" data-hi="‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç">Upload Document</a>
    <a href="#map" data-en="Live Map" data-hi="‡§≤‡§æ‡§á‡§µ ‡§Æ‡§æ‡§®‡§ö‡§ø‡§§‡•ç‡§∞">Live Map</a>
  </nav>

  </nav>

  <!-- Hero -->
  <div class="hero" id="home">
    <h1 data-en="Welcome to Complaint Registration Portal" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à">Welcome to Complaint Registration Portal</h1>
    <p data-en="File, track and resolve complaints anywhere with ease" data-hi="‡§ï‡§π‡•Ä‡§Ç ‡§∏‡•á ‡§≠‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç, ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç">File, track and resolve complaints anywhere with ease</p>
  </div>

  <!-- Complaint Registration -->
  <section id="register" class="section">
    <h2 data-en="Online Complaint Registration" data-hi="‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£">Online Complaint Registration</h2>
    <form id="complaintForm">
      <div>
      <label for="name" data-en="Full Name *" data-hi="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *">Full Name *</label>
        <input type="text" id="name" required data-en="Enter your name" data-hi="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" placeholder="Enter your name">
      </div>
      <div>
  <label for="email" data-en="Email" data-hi="‡§à‡§Æ‡•á‡§≤">Email</label>
  <input type="email" id="email" data-en="Enter your email" data-hi="‡§Ö‡§™‡§®‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" placeholder="Enter your email">
</div>
<div>
  <label for="phone" data-en="Phone" data-hi="‡§´‡§º‡•ã‡§®">Phone</label>
  <input type="tel" id="phone" 
         data-en="Enter your phone number" 
         data-hi="‡§Ö‡§™‡§®‡§æ ‡§´‡§º‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" 
         placeholder="Enter your phone number">
</div>

            <div>
  <label for="type" data-en="Complaint Type *" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ *">Complaint Type *</label>
  <select id="type" required>
    <option value="" data-en="-- Select --" data-hi="-- ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç --">-- Select --</option>
    <option data-en="Water Supply" data-hi="‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø">Water Supply</option>
    <option data-en="Electricity" data-hi="‡§¨‡§ø‡§ú‡§≤‡•Ä">Electricity</option>
    <option data-en="Roads" data-hi="‡§∏‡§°‡§º‡§ï‡•á‡§Ç">Roads</option>
    <option data-en="Sanitation" data-hi="‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ">Sanitation</option>
    <option data-en="Public Health" data-hi="‡§ú‡§® ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø">Public Health</option>
    <option data-en="Other" data-hi="‡§Ö‡§®‡•ç‡§Ø">Other</option>
  </select>
</div>
      <div>
  <label for="subject" data-en="Subject *" data-hi="‡§µ‡§ø‡§∑‡§Ø *">Subject *</label>
  <input type="text" id="subject" required 
         placeholder="Enter subject" 
         data-en="Enter subject" 
         data-hi="‡§µ‡§ø‡§∑‡§Ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">
</div>
      <div>
  <label for="description" data-en="Description *" data-hi="‡§µ‡§ø‡§µ‡§∞‡§£ *">Description *</label>
  <input id="description" required 
            placeholder="Describe your complaint" 
            data-en="Describe your complaint" 
            data-hi="‡§Ö‡§™‡§®‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§Ç"></input>
</div>
      <button type="submit" data-en="Submit Complaint" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç">Submit Complaint</button>
      <div id="formMsg" style="margin-top:10px;font-weight:600;"></div>
    </form>
  </section>

  <!-- Track Complaints -->
  <section id="track" class="section">
  <h2 data-en="Track Your Complaints" data-hi="‡§Ö‡§™‡§®‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç">Track Your Complaints</h2>
  
  <div class="search-section">
    <div class="search-controls">
      
      <!-- Complaint ID -->
      <div>
        <label for="searchId" data-en="Search by Complaint ID" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§Ü‡§à‡§°‡•Ä ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ñ‡•ã‡§ú‡•á‡§Ç">
          Search by Complaint ID
        </label>
        <input type="text" id="searchId" 
               data-en="Enter Complaint ID" 
               data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç"
               placeholder="Enter Complaint ID">
      </div>

      <!-- Filter by Type -->
      <div>
        <label for="filterType" data-en="Filter by Type" data-hi="‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç">
          Filter by Type
        </label>
        <select id="filterType">
          <option value="" data-en="All Types" data-hi="‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞">All Types</option>
          <option value="water" data-en="Water Supply" data-hi="‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø">Water Supply</option>
          <option value="electricity" data-en="Electricity" data-hi="‡§¨‡§ø‡§ú‡§≤‡•Ä">Electricity</option>
          <option value="roads" data-en="Roads" data-hi="‡§∏‡§°‡§º‡§ï‡•á‡§Ç">Roads</option>
          <option value="sanitation" data-en="Sanitation" data-hi="‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ">Sanitation</option>
          <option value="health" data-en="Public Health" data-hi="‡§ú‡§® ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø">Public Health</option>
          <option value="other" data-en="Other" data-hi="‡§Ö‡§®‡•ç‡§Ø">Other</option>
        </select>
      </div>

      <!-- Filter by Status -->
      <div>
        <label for="filterStatus" data-en="Filter by Status" data-hi="‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§õ‡§æ‡§Å‡§ü‡•á‡§Ç">
          Filter by Status
        </label>
        <select id="filterStatus">
          <option value="" data-en="All Status" data-hi="‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø">All Status</option>
          <option value="registered" data-en="Registered" data-hi="‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§">Registered</option>
          <option value="progress" data-en="In Progress" data-hi="‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§™‡§∞">In Progress</option>
          <option value="resolved" data-en="Resolved" data-hi="‡§∏‡•Å‡§≤‡§ù‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ">Resolved</option>
        </select>
      </div>

      <!-- Search Button -->
      <div>
        <button type="button" onclick="filterComplaints()" 
                data-en="Search" 
                data-hi="‡§ñ‡•ã‡§ú‡•á‡§Ç">Search</button>
      </div>
    </div>
  </div>

 
</section>


  <!-- Database Manager -->
  <section id="database" class="section">
 <section id="database" class="section">
  <h2 data-en="Database Manager" data-hi="‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï">Database Manager</h2>
  <p data-en="Manage your local complaint database stored in browser memory."
     data-hi="‡§Ö‡§™‡§®‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Æ‡•ã‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§∞‡•á‡§Ç‡•§">
     Manage your local complaint database stored in browser memory.
  </p>

  <div class="db-controls">
    <button onclick="exportData()" 
            data-en="üì• Export Data" 
            data-hi="üì• ‡§°‡•á‡§ü‡§æ ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç">üì• Export Data</button>

    <button onclick="document.getElementById('importFile').click()" 
            data-en="üì§ Import Data" 
            data-hi="üì§ ‡§°‡•á‡§ü‡§æ ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç">üì§ Import Data</button>

    <button onclick="clearAllData()" style="background:#f44336" 
            data-en="üóëÔ∏è Clear All Data" 
            data-hi="üóëÔ∏è ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§π‡§ü‡§æ‡§è‡§Å">üóëÔ∏è Clear All Data</button>

    <button onclick="showStats()" 
            data-en="üìä Show Statistics" 
            data-hi="üìä ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å">üìä Show Statistics</button>
  </div>

  <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
  
  <div id="statsContainer" style="margin-top:20px;" 
       data-en="Statistics will appear here..." 
       data-hi="‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡•Ä...">
       Statistics will appear here...
  </div>
</section>

    
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
    
    <div id="statsContainer" style="margin-top:20px;"></div>
  </section>

  <!-- Upload Document -->
 <section id="upload" class="section">
 <section id="upload" class="section">
  <h2 data-en="Upload Document / Image" data-hi="‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º / ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç">
    Upload Document / Image
  </h2>
  <form>
    <div>
      <label for="doc" data-en="Choose File" data-hi="‡§´‡§º‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç">Choose File</label>
      <input type="file" id="doc" accept=".jpg,.jpeg,.png,.pdf">
    </div>
    <button type="button" 
            onclick="alert(localStorage.getItem('language') === 'hi' ? '‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à!' : 'File uploaded successfully!')" 
            data-en="Upload" 
            data-hi="‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç">Upload</button>
  </form>
</section>

  </section>

  <!-- Live Map -->
 <section id="map" class="section">
  <h2 data-en="Your Live Location" data-hi="‡§Ü‡§™‡§ï‡§æ ‡§≤‡§æ‡§á‡§µ ‡§∏‡•ç‡§•‡§æ‡§®">
    Your Live Location
  </h2>
  <div id="locationStatus" 
       style="margin:12px 0;font-weight:600;" 
       data-en="Fetching your location..." 
       data-hi="‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...">
  </div>
  <iframe id="liveMap"></iframe>
</section>


  <!-- Footer -->
  <footer>
    <p data-en="üìç Buldhana, india| üìû +91-9876543210 | ‚úâ info@complaintportal.gov"
   data-hi="üìç ‡§¨‡•Å‡§≤‡§¢‡§æ‡§£‡§æ, ‡§≠‡§æ‡§∞‡§§ | üìû +91-9876543210 | ‚úâ info@complaintportal.gov">
  üìç buldhana, India | üìû +91-9876543210 | ‚úâ info@complaintportal.gov
</p>

<p data-en="¬© Complaint Registration Portal. All Rights Reserved."
   data-hi="¬© ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤‡•§ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§">
  ¬© <span id="year"></span> Complaint Registration Portal. All Rights Reserved.
</p>

  </footer>
<script>    // Database Class for Local Storage Management
    class ComplaintDB {
      constructor() {
        this.dbKey = 'complaintDB';
        this.init();
      }

      init() {
        const existing = this.getAllComplaints();
      }

      saveToStorage(data) {
        const jsonData = JSON.stringify(data, null, 2);
        localStorage.setItem(this.dbKey, jsonData);
      }

      getAllComplaints() {
        try {
          const data = localStorage.getItem(this.dbKey);
          return data ? JSON.parse(data) : [];
        } catch (e) {
          console.error('Error reading database:', e);
          return [];
        }
      }

      addComplaint(complaint) {
        const complaints = this.getAllComplaints();
        complaint.id = this.generateId();
        complaint.status = 'registered';
        complaint.dateCreated = new Date().toISOString();
        complaint.dateUpdated = new Date().toISOString();
        
        complaints.push(complaint);
        this.saveToStorage(complaints);
        return complaint.id;
      }

      getComplaintById(id) {
        const complaints = this.getAllComplaints();
        return complaints.find(c => c.id === id);
      }

      updateComplaintStatus(id, status) {
        const complaints = this.getAllComplaints();
        const complaint = complaints.find(c => c.id === id);
        if (complaint) {
          complaint.status = status;
          complaint.dateUpdated = new Date().toISOString();
          this.saveToStorage(complaints);
          return true;
        }
        return false;
      }

      deleteComplaint(id) {
        let complaints = this.getAllComplaints();
        complaints = complaints.filter(c => c.id !== id);
        this.saveToStorage(complaints);
      }

      generateId() {
        return "C" + Math.random().toString(36).substr(2, 6).toUpperCase();
      }

      exportData() {
        return JSON.stringify(this.getAllComplaints(), null, 2);
      }

      importData(jsonData) {
        try {
          const data = JSON.parse(jsonData);
          if (Array.isArray(data)) {
            this.saveToStorage(data);
            return true;
          }
        } catch (e) {
          console.error('Invalid JSON data:', e);
        }
        return false;
      }

      clearAll() {
        this.saveToStorage([]);
      }

      getStats() {
        const complaints = this.getAllComplaints();
        const stats = {
          total: complaints.length,
          registered: complaints.filter(c => c.status === 'registered').length,
          inProgress: complaints.filter(c => c.status === 'progress').length,
          resolved: complaints.filter(c => c.status === 'resolved').length,
          byType: {}
        };

        complaints.forEach(c => {
          stats.byType[c.type] = (stats.byType[c.type] || 0) + 1;
        });

        return stats;
      }
    }

    // Initialize Database
    const db = new ComplaintDB();
    
    // Form handling
    const form = document.getElementById("complaintForm");
    const msg = document.getElementById("formMsg");
    document.getElementById("year").textContent = new Date().getFullYear();

    form.addEventListener("submit", e => {
      e.preventDefault();
      
      const complaint = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        type: document.getElementById("type").value,
        subject: document.getElementById("subject").value,
        description: document.getElementById("description").value
      };

      const id = db.addComplaint(complaint);
      
      msg.style.color = "green";
      msg.innerHTML = `‚úî Complaint submitted successfully.<br>Your Complaint ID: <b>${id}</b>`;
      form.reset();
      
      // Refresh complaints display if visible
      displayComplaints();
    });

    // Display complaints
    function displayComplaints() {
      const container = document.getElementById("complaintsContainer");
      const complaints = db.getAllComplaints();
      
      if (complaints.length === 0) {
        container.innerHTML = "<p>No complaints found. Register your first complaint above!</p>";
        return;
      }

      let html = complaints.map(complaint => `
        <div class="complaint-item">
          <div class="complaint-header">
            <span class="complaint-id">${complaint.id}</span>
            <span class="status ${complaint.status}">${complaint.status.toUpperCase()}</span>
          </div>
          <h4>${complaint.subject}</h4>
          <p><strong>Type:</strong> ${complaint.type}</p>
          <p><strong>Name:</strong> ${complaint.name}</p>
          <p><strong>Description:</strong> ${complaint.description}</p>
          <p><strong>Date:</strong> ${new Date(complaint.dateCreated).toLocaleDateString()}</p>
          <div style="margin-top:10px;">
            <button onclick="updateStatus('${complaint.id}', 'progress')" 
                    ${complaint.status === 'progress' ? 'disabled' : ''}>Mark In Progress</button>
            <button onclick="updateStatus('${complaint.id}', 'resolved')" 
                    ${complaint.status === 'resolved' ? 'disabled' : ''}>Mark Resolved</button>
            <button onclick="deleteComplaint('${complaint.id}')" 
                    style="background:#f44336">Delete</button>
          </div>
        </div>
      `).join("");

      container.innerHTML = html;
    }

    // Filter complaints
    function filterComplaints() {
      const searchId = document.getElementById("searchId").value.toLowerCase();
      const filterType = document.getElementById("filterType").value;
      const filterStatus = document.getElementById("filterStatus").value;
      
      let complaints = db.getAllComplaints();
      
      if (searchId) {
        complaints = complaints.filter(c => c.id.toLowerCase().includes(searchId));
      }
      if (filterType) {
        complaints = complaints.filter(c => c.type === filterType);
      }
      if (filterStatus) {
        complaints = complaints.filter(c => c.status === filterStatus);
      }
      
      const container = document.getElementById("complaintsContainer");
      if (complaints.length === 0) {
        container.innerHTML = "<p>No complaints match your search criteria.</p>";
        return;
      }

      let html = complaints.map(complaint => `
        <div class="complaint-item">
          <div class="complaint-header">
            <span class="complaint-id">${complaint.id}</span>
            <span class="status ${complaint.status}">${complaint.status.toUpperCase()}</span>
          </div>
          <h4>${complaint.subject}</h4>
          <p><strong>Type:</strong> ${complaint.type}</p>
          <p><strong>Name:</strong> ${complaint.name}</p>
          <p><strong>Description:</strong> ${complaint.description}</p>
          <p><strong>Date:</strong> ${new Date(complaint.dateCreated).toLocaleDateString()}</p>
          <div style="margin-top:10px;">
            <button onclick="updateStatus('${complaint.id}', 'progress')" 
                    ${complaint.status === 'progress' ? 'disabled' : ''}>Mark In Progress</button>
            <button onclick="updateStatus('${complaint.id}', 'resolved')" 
                    ${complaint.status === 'resolved' ? 'disabled' : ''}>Mark Resolved</button>
            <button onclick="deleteComplaint('${complaint.id}')" 
                    style="background:#f44336">Delete</button>
          </div>
        </div>
      `).join("");

      container.innerHTML = html;
    }

    // Update complaint status
    function updateStatus(id, status) {
      if (db.updateComplaintStatus(id, status)) {
        displayComplaints();
        alert(`Complaint ${id} status updated to: ${status}`);
      }
    }

    // Delete complaint
    function deleteComplaint(id) {
      if (confirm(`Are you sure you want to delete complaint ${id}?`)) {
        db.deleteComplaint(id);
        displayComplaints();
        alert(`Complaint ${id} deleted successfully.`);
      }
    }

    // Database management functions
    function exportData() {
      const data = db.exportData();
      const blob = new Blob([data], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `complaint_data_${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      alert('Data exported successfully!');
    }

    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        if (db.importData(e.target.result)) {
          alert('Data imported successfully!');
          displayComplaints();
        } else {
          alert('Error importing data. Please check the file format.');
        }
      };
      reader.readAsText(file);
    }

    function clearAllData() {
      if (confirm('Are you sure you want to clear all complaint data? This action cannot be undone.')) {
        db.clearAll();
        displayComplaints();
        alert('All data cleared successfully.');
      }
    }

    function showStats() {
      const stats = db.getStats();
      const container = document.getElementById("statsContainer");
      
      let typeStats = Object.entries(stats.byType)
        .map(([type, count]) => `<li>${type}: ${count}</li>`)
        .join('');

      container.innerHTML = `
        <div style="background:#f0f8ff;padding:20px;border-radius:8px;border:1px solid #ddd;">
          <h3>Database Statistics</h3>
          <p><strong>Total Complaints:</strong> ${stats.total}</p>
          <p><strong>Registered:</strong> ${stats.registered}</p>
          <p><strong>In Progress:</strong> ${stats.inProgress}</p>
          <p><strong>Resolved:</strong> ${stats.resolved}</p>
          <h4>By Type:</h4>
          <ul>${typeStats}</ul>
        </div>
      `;
    }

    // Reveal sections on scroll
    const sections = document.querySelectorAll(".section");
    const reveal = () => {
      sections.forEach(sec => {
        const top = sec.getBoundingClientRect().top;
        if (top < window.innerHeight - 100) {
          sec.classList.add("visible");
        }
      });
    };
    window.addEventListener("scroll", reveal);
    window.addEventListener("load", reveal);

    // Auto-detect user location on load
    window.addEventListener("load", () => {
      const status = document.getElementById("locationStatus");
      const map = document.getElementById("liveMap");

      if (navigator.geolocation) {
        status.textContent = "Detecting your location...";
        navigator.geolocation.getCurrentPosition(pos => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          status.textContent = "Latitude: " + lat.toFixed(4) + ", Longitude: " + lon.toFixed(4);
          map.src = "https://www.google.com/maps?q=" + lat + "," + lon + "&z=15&output=embed";
        }, () => {
          status.style.color = "red";
          status.textContent = "Unable to fetch location. Please allow GPS access.";
        });
      } else {
        status.textContent = "Geolocation not supported in this browser.";
      }

      // Initialize complaints display
      displayComplaints();
    });
    
      // Multilingual support
    const langSwitcher = document.getElementById("languageSwitcher");

function setLanguage(lang) {
  localStorage.setItem("language", lang);

  document.querySelectorAll("[data-en]").forEach(el => {
    const text = el.getAttribute(`data-${lang}`);

    // If it's an input/textarea placeholder
    if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
      if (el.hasAttribute("placeholder")) {
        el.placeholder = text;
      }
    } 
    // If it's an option inside a select
    else if (el.tagName === "OPTION") {
      el.textContent = text;
    } 
    // For all other elements (p, h2, button, label, etc.)
    else {
      el.textContent = text;
    }
  });
}

// Load saved language on page load
document.addEventListener("DOMContentLoaded", () => {
  const savedLang = localStorage.getItem("language") || "en";
  langSwitcher.value = savedLang;
  setLanguage(savedLang);
});

// Change when user selects new language
langSwitcher.addEventListener("change", (e) => {
  setLanguage(e.target.value);
});


    </script>

</body>
</html>